FROM python:3.11-slim

WORKDIR /app

# Set PYTHONPATH
ENV PYTHONPATH=/app

# Install minimal dependencies
RUN pip install fastapi uvicorn

# Copy only the simple test file
COPY src/simple_main.py src/

# Test import during build
RUN python src/simple_main.py --version || echo "Test run"

EXPOSE 8001

# Run the simple test app
CMD ["python", "src/simple_main.py"]